--[[
	ESP GUI Profissional com Abas (Tabs) e Tema Escuro/Claro
	Compatível com PC (tecla P) e Mobile (botões na tela)
	Inclui: Box, Nome, Time, Distância, Vida, Tracers, Skeleton, Cores por Time
]]--

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

-- GUI Principal
local screenGui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
screenGui.Name = "ESP_GUI"
screenGui.ResetOnSpawn = false

-- Tema
local isDarkMode = true
local function getTheme()
	return isDarkMode and Color3.fromRGB(35,35,35) or Color3.fromRGB(245,245,245)
end
local function getTextColor()
	return isDarkMode and Color3.fromRGB(220,220,220) or Color3.fromRGB(30,30,30)
end

-- Frame Principal
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 300, 0, 350)
mainFrame.Position = UDim2.new(0, 10, 0, 80)
mainFrame.BackgroundColor3 = getTheme()
mainFrame.BorderSizePixel = 0
mainFrame.Visible = true
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.Parent = screenGui

-- UICorner para visual moderno
local corner = Instance.new("UICorner", mainFrame)
corner.CornerRadius = UDim.new(0, 8)

-- Título
local title = Instance.new("TextLabel")
title.Text = "ESP Menu"
title.Size = UDim2.new(1, 0, 0, 30)
title.BackgroundTransparency = 1
title.TextColor3 = getTextColor()
title.Font = Enum.Font.GothamBold
title.TextSize = 20
title.Parent = mainFrame

-- Abas (Tabs)
local tabs = {"Geral", "Visual", "Tema"}
local currentTab = "Geral"

local tabButtons = {}
for i, tabName in ipairs(tabs) do
	local tab = Instance.new("TextButton")
	tab.Size = UDim2.new(0, 90, 0, 25)
	tab.Position = UDim2.new(0, 10 + ((i-1)*100), 0, 35)
	tab.Text = tabName
	tab.TextColor3 = getTextColor()
	tab.BackgroundColor3 = getTheme()
	tab.Font = Enum.Font.Gotham
	tab.TextSize = 14
	tab.Parent = mainFrame
	tab.MouseButton1Click:Connect(function()
		currentTab = tabName
		updateTabVisibility()
	end)
	table.insert(tabButtons, tab)
end

-- Conteúdo por aba
local tabContents = {}
local function createTabContent(name)
	local frame = Instance.new("Frame")
	frame.Size = UDim2.new(1, -20, 1, -70)
	frame.Position = UDim2.new(0, 10, 0, 65)
	frame.BackgroundTransparency = 1
	frame.Visible = false
	frame.Parent = mainFrame
	tabContents[name] = frame
	return frame
end

-- Abas: Geral
local generalFrame = createTabContent("Geral")
local options = {
	{"Box ESP", "box"},
	{"Nome do Jogador", "name"},
	{"Time", "team"},
	{"Distância", "distance"},
	{"Vida", "health"},
	{"Tracers", "tracers"},
	{"Skeleton", "skeleton"},
	{"Cor por Time", "teamColor"},
}

local states = {}
for i, opt in ipairs(options) do
	local label = Instance.new("TextLabel")
	label.Text = opt[1]
	label.Size = UDim2.new(0, 180, 0, 20)
	label.Position = UDim2.new(0, 0, 0, (i-1)*25)
	label.TextColor3 = getTextColor()
	label.BackgroundTransparency = 1
	label.TextXAlignment = Enum.TextXAlignment.Left
	label.Font = Enum.Font.Gotham
	label.TextSize = 14
	label.Parent = generalFrame

	local toggle = Instance.new("TextButton")
	toggle.Size = UDim2.new(0, 50, 0, 20)
	toggle.Position = UDim2.new(1, -60, 0, (i-1)*25)
	toggle.Text = "Off"
	toggle.BackgroundColor3 = Color3.fromRGB(150, 50, 50)
	toggle.TextColor3 = Color3.fromRGB(255, 255, 255)
	toggle.Font = Enum.Font.Gotham
	toggle.TextSize = 14
	toggle.Parent = generalFrame

	states[opt[2]] = false
	toggle.MouseButton1Click:Connect(function()
		states[opt[2]] = not states[opt[2]]
		toggle.Text = states[opt[2]] and "On" or "Off"
		toggle.BackgroundColor3 = states[opt[2]] and Color3.fromRGB(50, 150, 50) or Color3.fromRGB(150, 50, 50)
	end)
end

-- Aba: Tema
local themeFrame = createTabContent("Tema")
local themeLabel = Instance.new("TextLabel")
themeLabel.Text = "Tema Escuro/Claro"
themeLabel.Size = UDim2.new(0.8, 0, 0, 25)
themeLabel.Position = UDim2.new(0, 0, 0, 0)
themeLabel.TextColor3 = getTextColor()
themeLabel.Font = Enum.Font.Gotham

themeLabel.TextSize = 14
themeLabel.BackgroundTransparency = 1
themeLabel.TextXAlignment = Enum.TextXAlignment.Left
themeLabel.Parent = themeFrame

local themeToggle = Instance.new("TextButton")
themeToggle.Size = UDim2.new(0, 50, 0, 20)
themeToggle.Position = UDim2.new(1, -60, 0, 0)
themeToggle.Text = isDarkMode and "Dark" or "Light"
themeToggle.BackgroundColor3 = Color3.fromRGB(90, 90, 90)
themeToggle.TextColor3 = Color3.fromRGB(255, 255, 255)
themeToggle.Font = Enum.Font.Gotham

themeToggle.TextSize = 14
themeToggle.Parent = themeFrame

themeToggle.MouseButton1Click:Connect(function()
	isDarkMode = not isDarkMode
	themeToggle.Text = isDarkMode and "Dark" or "Light"
	mainFrame.BackgroundColor3 = getTheme()
	title.TextColor3 = getTextColor()
	for _, b in pairs(tabButtons) do b.BackgroundColor3 = getTheme(); b.TextColor3 = getTextColor() end
	for _, f in pairs(tabContents) do
		for _, c in pairs(f:GetChildren()) do
			if c:IsA("TextLabel") or c:IsA("TextButton") then
				c.TextColor3 = getTextColor()
			end
		end
	end
end)

-- Função de atualização das abas
function updateTabVisibility()
	for name, frame in pairs(tabContents) do
		frame.Visible = name == currentTab
	end
end
updateTabVisibility()

-- Tecla para esconder/mostrar
local menuVisible = true
UserInputService.InputBegan:Connect(function(input, gpe)
	if not gpe and input.KeyCode == Enum.KeyCode.P then
		menuVisible = not menuVisible
		mainFrame.Visible = menuVisible
	end
end)

-- Botão para mobile
local mobileButton = Instance.new("TextButton")
mobileButton.Size = UDim2.new(0, 100, 0, 30)
mobileButton.Position = UDim2.new(0, 10, 0, 20)
mobileButton.Text = "Toggle Menu"
mobileButton.Parent = screenGui
mobileButton.TextColor3 = Color3.fromRGB(255, 255, 255)
mobileButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)

mobileButton.MouseButton1Click:Connect(function()
	menuVisible = not menuVisible
	mainFrame.Visible = menuVisible
end)

-- Seu sistema de renderização de ESP deve usar as variáveis em 'states'
-- Exemplo:
-- if states["box"] then desenharBox() end
-- if states["tracers"] then desenharLinha() end
